<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="NYC Bus Profiles">
  <meta name="author" content="NYU CUSP">
  <!-- <link rel="icon" href="../../favicon.ico"> -->
  <title>NYC Bus Profile Dashboard</title>
  <link href="{{ url_for('static', filename='css/pace.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/libs/bootstrap.min.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/performances.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/libs/leaflet.css') }}" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600" rel="stylesheet">
</head>

<body>
  <nav class="navbar navbar-default" id="navBars">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div id="navbarHeader" class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse-1" aria-expanded="false" style="padding-top: 15px;">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a id="mainLogo" class="navbar-brand" href="/home" style="padding-top: 23px;">
          <span class="text">NYC Bus Profile</span>
          </a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse navbar-collapse-1" id="navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right topbar">
          <li class="active">
            <a href="/home">
              <span>Home</span>
            </a>
          </li>
          <li>
            <a href="/routes/Bx39">
              <span>Route Level Metrics</span>
            </a>
          </li>
          <li>
            <a href="/methodologies">
              <span>Methodologies</span>
            </a>
          </li>
          <li>
            <a href="/about" style="padding-right:40px;">
              <span>About</span>
            </a>
          </li>
        </ul>
      </div><!-- /.navbar-collapse -->

    </div><!-- /.container-fluid -->
  </nav><!-- end of the navbar -->

  <!-- content -->
  <div id="container">
    <section>
      <!-- map -->
      <div class="row" id="maphomediv">
        <div id="maphome"></div>
      </div>

      <!-- the boxes -->
      <div class="row mtop60 mleft32">
        <div class="col-sm-12">
          <h1>Summary</h1>
          <span class="span-date">31 May 2017</span>
        </div>
      </div>

      <div class="row mleft32">
        <div class="col-sm-5 metric-box-home">
          <div class="rowbox">
            <h2>Average Delay</h2>
          </div>
          <div class="row">
            <h1 class="jumbo">3.5 min</h1>
          </div>
          <div class="row">
            <div class="btn btn-primary .pull-right btn-round">DETAILS</div>
          </div>
        </div>
      </div>

      <div class="row mtop0 mleft32">
        <div class="col-sm-5 metric-box-home">
          <div class="rowbox">
            <h2>Average Speed</h2>
          </div>
          <div class="row">
            <h1 class="jumbo">4.6 mph</h1>
          </div>
          <div class="row">
            <div class="btn btn-primary .pull-right btn-round">DETAILS</div>
          </div>
        </div>
      </div>

    </section>

    <!-- section charts here -->
    <section id="charthome">
      <div class="row">

        <div class="col-sm-6">
          <div class="row">
            <h1>Average Delay</h1>
            <p>Average delay, or academically known as excess wait time, is a difference between actual wait time and scheduled wait time</p>
            <div>
              <h4>Past 7 days trend</h4>
              <div class="blocks" id="ewt-home-chart"></div>
            </div>
          </div>
        </div>

        <div class="col-sm-6">
          <div class="row">
            <h1>Average Speed</h1>
            <p>How fast the buses are in average.</p>
            <div>
              <h4>Past 7 days trend</h4>
              <div class="blocks" id="speed-home-chart"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-6">
          <div class="row">
            <h1>Reliability Buffer Time</h1>
            <p>This represents the slack time added to typical travel time in order to ensure timeliness of arrival. A high RBT suggests unreliable service, as there is greater variability in travel time</p>
            <div>
              <h4>Past 7 days trend</h4>
              <div class="blocks" id="rbt-home-chart"></div>
            </div>
          </div>
        </div>

        <div class="col-sm-6">
          <div class="row">
            <h1>Excess Journey Time</h1>
            <p>Difference between actual journey time and scheduled journey time.</p>
            <div style="height:300px; border: 1px solid #ccc;">
              <h4>stacked bar</h4>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4 col-sm-offset-4">
          <button class="btn btn-primary btn-large">Find your journey!</button>
        </div>
      </div>

    </section>
  </div>
</body>

<div id="footer"><!-- footer -->
  <div id="footerInner">

    <div id="rightFooter">
      <a href="" target="_blank">
        <img src="{{ url_for('static', filename='img/transitcenter.png') }}" alt="MassDOT Logo" height="31" class="footerLogo">
      </a>
      <a href="" target="_blank">
        <img src="{{ url_for('static', filename='img/CUSP_long_color.jpg') }}" alt="MBTA Logo" height="31" class="footerLogo">
      </a>
    </div>
  </div>
</div> <!-- End Footer -->

<!--javascripts -->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/libs/d3.v4.js') }}"></script>
<script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js"
        integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA=="
        crossorigin=""></script>
<script src="{{ url_for('static', filename='js/libs/bootstrap.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/libs/pace.min.js') }}"></script>

<!-- map home script goes here -->
<script>
$( document ).ready(function() {
    var maphome = L.map('maphome',{ zoomControl:false }).setView([40.71597, -74.05367], 11);
    new L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/light-v9/tiles/256/{z}/{x}/{y}?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
        maxZoom: 11,
        minZoom: 11,
        accessToken: 'pk.eyJ1IjoiaWZ3cmlnaHQiLCJhIjoiY2o0ZnJrbXdmMWJqcTMzcHNzdnV4bXd3cyJ9.1G8ErVmk7jP7PDuFp8KHpQ'
    }).addTo(maphome);
    L.marker(new L.LatLng(40.78222, -73.96528), {icon:createLabelIcon("mapHomeBoro","<span>Manhattan</span>")}).addTo(maphome);
    L.marker(new L.LatLng(40.76922, -73.96528), {icon:createLabelIcon("boroMetricsGood","<span>1.2min</span>")}).addTo(maphome);
    L.marker(new L.LatLng(40.76022, -73.96528), {icon:createLabelIcon("boroMetricsBad","<span>3.7mph</span>")}).addTo(maphome);


    L.marker(new L.LatLng(40.69245, -73.99036), {icon:createLabelIcon("mapHomeBoro","<span>Brooklyn</span>")}).addTo(maphome);
    L.marker(new L.LatLng(40.67945, -73.99036), {icon:createLabelIcon("boroMetricsBad","<span>2.7min</span>")}).addTo(maphome);
    L.marker(new L.LatLng(40.67045, -73.99036), {icon:createLabelIcon("boroMetricsGood","<span>7.5mph</span>")}).addTo(maphome);

    L.marker(new L.LatLng(40.75072, -73.91103), {icon:createLabelIcon("mapHomeBoro","<span>Queens</span>")}).addTo(maphome);
    L.marker(new L.LatLng(40.73772, -73.91103), {icon:createLabelIcon("boroMetricsGood","<span>1.7min</span>")}).addTo(maphome);
    L.marker(new L.LatLng(40.72972, -73.91103), {icon:createLabelIcon("boroMetricsGood","<span>7.5mph</span>")}).addTo(maphome);

    L.marker(new L.LatLng(40.83037, -73.91164), {icon:createLabelIcon("mapHomeBoro","<span>Bronx</span>")}).addTo(maphome);
    L.marker(new L.LatLng(40.81737, -73.91164), {icon:createLabelIcon("boroMetricsBad","<span>2.7min</span>")}).addTo(maphome);
    L.marker(new L.LatLng(40.80837, -73.91164), {icon:createLabelIcon("boroMetricsGood","<span>7.5mph</span>")}).addTo(maphome);

    L.marker(new L.LatLng(40.6427, -74.0799), {icon:createLabelIcon("mapHomeBoro","<span>StatenIsland</span>")}).addTo(maphome);
    L.marker(new L.LatLng(40.6297, -74.0799), {icon:createLabelIcon("boroMetricsBad","<span>2.7min</span>")}).addTo(maphome);
    L.marker(new L.LatLng(40.6207, -74.0799), {icon:createLabelIcon("boroMetricsGood","<span>7.5mph</span>")}).addTo(maphome);

  })

  var createLabelIcon = function(labelClass,labelText){
    return L.divIcon({
      className: labelClass,
      html: labelText
    })
  }
</script>
</html>
